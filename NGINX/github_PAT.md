Понял! В вашем случае, поскольку вы используете **OpenResty** в составе Docker-контейнера **Nginx Proxy Manager (NPM)**, задача немного меняется. Ниже я опишу, как настроить редирект с использованием **Nginx Proxy Manager** и возможностей OpenResty.

---

### 1. Общий план
Поскольку OpenResty уже включает поддержку Lua, вы можете добавить логику для отправки заголовка с **PAT токеном** через пользовательские конфигурации Nginx.

В **NPM** есть возможность добавлять пользовательские конфигурации через раздел **Custom Nginx Configuration**.

---

### 2. Настройка редиректа в NPM

1. **Создайте новый Proxy Host**:
   - Откройте интерфейс Nginx Proxy Manager.
   - Добавьте новый **Proxy Host** с вашим доменом или поддоменом (например, `github.yourdomain.com`).
   - В поле **Forward Hostname/IP** укажите `raw.githubusercontent.com`.
   - В поле **Forward Port** укажите `443` (поскольку это HTTPS).
   - Включите опцию **Force SSL**.

2. **Добавьте пользовательскую конфигурацию**:
   После создания Proxy Host:
   - Нажмите на **Edit**.
   - Перейдите в раздел **Custom Nginx Configuration**.
   - Добавьте следующий код:

```nginx
set $github_pat "<YOUR_PAT_TOKEN>";

proxy_set_header Authorization "token $github_pat";

location / {
    rewrite ^/github-file/(.*)$ /<USER>/<REPO>/<BRANCH>/$1 break;
}
```

**Пояснения:**
- `$github_pat`: Здесь хранится ваш токен, который будет передаваться в запросе.
- `proxy_set_header`: Добавляет заголовок `Authorization`, который требуется для аутентификации через PAT.
- `rewrite`: Перенаправляет запрос на нужный путь в репозитории.

---

### 3. Перезапуск NPM
После сохранения конфигурации:
1. Перезагрузите контейнер через Docker:
   ```bash
   docker restart <npm_container_name>
   ```
   Либо выполните это через интерфейс Docker.

2. Проверьте работу настроенного Proxy Host.

---

### 4. Пример использования
Теперь ваш сервер будет доступен по адресу:
```bash
https://github.yourdomain.com/github-file/<path_to_your_file>
```

---

### 5. Примечания
1. **Безопасность**: Убедитесь, что токен (PAT) защищен от несанкционированного доступа. Например, используйте доступ по IP или парольную защиту через NPM.
2. **Автоматизация**: Если токен нужно будет обновлять, рассмотрите использование переменных среды или интеграцию с хранилищем секретов (например, Vault).
3. **Обновление токена**: Токен можно легко заменить, отредактировав `$github_pat` в пользовательской конфигурации.

Если что-то пойдёт не так или нужно больше деталей, уточните!
